{
    "sourceFile": ".github/workflows/main.yml",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1702375970538,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1702376088192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,15 +2,16 @@\n on:\n   push:\n     tags:\n       - v*.*.*\n-\n jobs:\n   release:\n     runs-on: ${{ matrix.os }}\n+\n     strategy:\n       matrix:\n-        os: [windows-latest]\n+        os: [windows-latest, macos-latest]\n+\n     steps:\n       - name: Check out Git repository\n         uses: actions/checkout@v3\n \n@@ -18,18 +19,29 @@\n         uses: actions/setup-node@v3\n         with:\n           node-version: 16\n \n-      - name: Install Dependencies\n-        run: npm install\n+      - name: Install pnpm and install Dependencies\n+        run: |\n+          npm install -g pnpm\n+          pnpm install\n+\n+      - name: build-mac\n+        if: matrix.os == 'macos-latest'\n+        run: pnpm build:mac\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n+\n       - name: build-win\n         if: matrix.os == 'windows-latest'\n-        run: npm run build:win\n+        run: pnpm build:win\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n \n       - name: release\n         uses: softprops/action-gh-release@v1\n         with:\n-          draft: true\n+          draft: false\n           files: |\n             dist/*.exe\n             dist/*.zip\n             dist/*.dmg\n@@ -40,5 +52,12 @@\n             dist/*.tar.gz\n             dist/*.yml\n             dist/*.blockmap\n         env:\n-          GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}\n+          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n+      - name: Deploy\n+        uses: s0/git-publish-subdir-action@develop\n+        env:\n+          REPO: git@github.com:bzw1204/xray-client.git\n+          BRANCH: gh-pages\n+          FOLDER: dist\n+          SSH_PRIVATE_KEY: ${{ secrets.DEPLOY_PRIVATE_KEY }}\n"
                },
                {
                    "date": 1702376093704,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n     runs-on: ${{ matrix.os }}\n \n     strategy:\n       matrix:\n-        os: [windows-latest, macos-latest]\n+        os: [windows-latest]\n \n     steps:\n       - name: Check out Git repository\n         uses: actions/checkout@v3\n"
                },
                {
                    "date": 1702376105815,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,57 @@\n+name: 发布新版本\n+on:\n+  push:\n+    tags:\n+      - v*.*.*\n+jobs:\n+  release:\n+    runs-on: ${{ matrix.os }}\n+\n+    strategy:\n+      matrix:\n+        os: [windows-latest]\n+\n+    steps:\n+      - name: Check out Git repository\n+        uses: actions/checkout@v3\n+\n+      - name: Install Node.js\n+        uses: actions/setup-node@v3\n+        with:\n+          node-version: 16\n+\n+      - name: Install pnpm and install Dependencies\n+        run: |\n+          npm install -g pnpm\n+          pnpm install\n+\n+      - name: build-win\n+        if: matrix.os == 'windows-latest'\n+        run: pnpm build:win\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n+\n+      - name: release\n+        uses: softprops/action-gh-release@v1\n+        with:\n+          draft: false\n+          files: |\n+            dist/*.exe\n+            dist/*.zip\n+            dist/*.dmg\n+            dist/*.AppImage\n+            dist/*.snap\n+            dist/*.deb\n+            dist/*.rpm\n+            dist/*.tar.gz\n+            dist/*.yml\n+            dist/*.blockmap\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n+      - name: Deploy\n+        uses: s0/git-publish-subdir-action@develop\n+        env:\n+          REPO: git@github.com:bzw1204/xray-client.git\n+          BRANCH: gh-pages\n+          FOLDER: dist\n+          SSH_PRIVATE_KEY: ${{ secrets.DEPLOY_PRIVATE_KEY }}\n"
                },
                {
                    "date": 1702376118827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,68 +53,5 @@\n         env:\n           REPO: git@github.com:bzw1204/xray-client.git\n           BRANCH: gh-pages\n           FOLDER: dist\n-          SSH_PRIVATE_KEY: ${{ secrets.DEPLOY_PRIVATE_KEY }}\n-name: 发布新版本\n-on:\n-  push:\n-    tags:\n-      - v*.*.*\n-jobs:\n-  release:\n-    runs-on: ${{ matrix.os }}\n-\n-    strategy:\n-      matrix:\n-        os: [windows-latest]\n-\n-    steps:\n-      - name: Check out Git repository\n-        uses: actions/checkout@v3\n-\n-      - name: Install Node.js\n-        uses: actions/setup-node@v3\n-        with:\n-          node-version: 16\n-\n-      - name: Install pnpm and install Dependencies\n-        run: |\n-          npm install -g pnpm\n-          pnpm install\n-\n-      - name: build-mac\n-        if: matrix.os == 'macos-latest'\n-        run: pnpm build:mac\n-        env:\n-          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n-\n-      - name: build-win\n-        if: matrix.os == 'windows-latest'\n-        run: pnpm build:win\n-        env:\n-          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n-\n-      - name: release\n-        uses: softprops/action-gh-release@v1\n-        with:\n-          draft: false\n-          files: |\n-            dist/*.exe\n-            dist/*.zip\n-            dist/*.dmg\n-            dist/*.AppImage\n-            dist/*.snap\n-            dist/*.deb\n-            dist/*.rpm\n-            dist/*.tar.gz\n-            dist/*.yml\n-            dist/*.blockmap\n-        env:\n-          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n-      - name: Deploy\n-        uses: s0/git-publish-subdir-action@develop\n-        env:\n-          REPO: git@github.com:bzw1204/xray-client.git\n-          BRANCH: gh-pages\n-          FOLDER: dist\n-          SSH_PRIVATE_KEY: ${{ secrets.DEPLOY_PRIVATE_KEY }}\n+          SSH_PRIVATE_KEY: ${{ secrets.ACCESS_TOKEN }}\n"
                },
                {
                    "date": 1702376130433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,10 +27,10 @@\n \n       - name: build-win\n         if: matrix.os == 'windows-latest'\n         run: pnpm build:win\n-        env:\n-          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n+        # env:\n+        #   GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}\n \n       - name: release\n         uses: softprops/action-gh-release@v1\n         with:\n"
                }
            ],
            "date": 1702375970538,
            "name": "Commit-0",
            "content": "name: 发布新版本\non:\n  push:\n    tags:\n      - v*.*.*\n\njobs:\n  release:\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        os: [windows-latest]\n    steps:\n      - name: Check out Git repository\n        uses: actions/checkout@v3\n\n      - name: Install Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 16\n\n      - name: Install Dependencies\n        run: npm install\n      - name: build-win\n        if: matrix.os == 'windows-latest'\n        run: npm run build:win\n\n      - name: release\n        uses: softprops/action-gh-release@v1\n        with:\n          draft: true\n          files: |\n            dist/*.exe\n            dist/*.zip\n            dist/*.dmg\n            dist/*.AppImage\n            dist/*.snap\n            dist/*.deb\n            dist/*.rpm\n            dist/*.tar.gz\n            dist/*.yml\n            dist/*.blockmap\n        env:\n          GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}\n"
        }
    ]
}